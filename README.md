
[![Build Status](https://travis-ci.org/info3/rails_testing_example.png?branch=master)](https://travis-ci.org/info3/rails_testing_example)

README
=====

This is an example a simple integration test in rails using minitest and capybara.
It has three parts:

* first uses simple minitest syntax
* second uses [minitest-spec-rails](http://rubydoc.info/gems/minitest-spec-rails/4.7.3/frames)
* third uses minitest-spec-rails plus [capybara_minitest_spec](http://rubydoc.info/gems/capybara_minitest_spec/1.0.0/frames)


Running tests
------

     rake

runs the default rake task which is test - runs all test cases. You can also run
specific groups with

    rake test:integration

and run single test files with

    rake test TEST=test/integration/first_items_integration_test.rb


Minitest
----

Minitest is a testing framework for ruby. It is the default test framework for Rails 4 and substitutes Unit::Test which was the default in Rails 3.2

Here's a short intro to using minitest with Rails 3.2
* http://blowmage.com/2012/07/10/announcing-minitest-rails

Note that you won't need any of the setup steps in rails 4 as minitest is already
the default there.

It also replaces rspec, which was often used as an alternative to unit::test in
rails 3.2.


Capybara
-------
Capybara is a library that enables you to automate website testing:
Going to a page, clicking on links and buttons, checking if content is there.

You should have at least one integration test per story.

see the integration tests in

    test/integration/

for examples. The rest of the testcases have been generated by the scaffold generator.

Model Tests
--------
If you implement behaviour in the model, write a model unit test for it, I've included
a very simple example in

   test/models/item_test.rb

* [Capybara](http://jnicklas.github.io/capybara/)
* Capybara and it's DSL is documented here: [Capybara](https://github.com/jnicklas/capybara)


Opening the current page
-------

If you get stuck with your tests, it is often helpful to have a look at the generated
page. To do that, include the launchy gem in your Gemfile and call

    save_and_open_page

from within your test case.


Finding out the class of something
-------
Putting somethin like

   assert_equal "xx", page.class

in one of your tests let's you find out the class of page, which is [Capybara::Session](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Session).


